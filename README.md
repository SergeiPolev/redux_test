# Тестовое задание в Redux Games

## Полевщиков Сергей

### Unity Developer

#### Время, затраченное на выполнение задания

Судя по трекеру времени нахождения в Юнити - 25 часов

#### Краткое описание архитектуры проекта

Архитектура основана на шаблоне, который я собрал на базе самописного DI-контейнера из уроков от K-Syndicate. Точка входа в приложение находится на сцене Main в GameObject'е Game, скрипте Game. Контейнер совмещен со State Machine цикла приложения и вложенной State Machine игрового цикла. Игровые view объекты (GameObject) спавнятся из GameFactory, получая префабы из StaticDataService. StaticDataService подгружает данные из Resources.

Все сервисы регистрируются и инициализируются в BootstrapState, после прогрева сервисов, игра переходит в состояние Hub'а и ждет нажатия на кнопку старт, чтобы запустить игровой цикл. Работа с UI реализована через сервис WindowService, который спавнит окна по мере их необходимости в созданный UIRoot. Весь Input игры, кроме UI, обрабатывается в InputService.

Сама работа с игрой начинается в реализации интерфейса IHexGridService. Здесь создаётся поле для гексов, поле расставляется внутри себя объекты по заготовленному конфигу уровня и блокирует недоступные гексы. ResultService следит за определёнными условиями для победы или поражения и при необходимости переходит в состояние победы-поражения

#### Известные проблемы и возможные улучшения

- В этой архитектуре есть статический доступ к контейнеру, который имеет доступ ко всем сервисам в игре, может привести к кросс-зависимостям систем и неявным зависимостям. 

- В Input Service сейчас имеется ForcedInput, чтобы во время бустеров не ломать логику инпута, потому что при создании новой пачки гексов. По-хорошему, нужно немного иначе подходить к инпуту, возможно, можно было добавить очередь из прерывающих инпутов и привязывать опрделенный инпут к объекту, который его вызвал, что точно учитывать кто сейчас прервал инпут.

- подсчёт одноцветных тайлов отрабатывает немного некорректно, он проверяет только точку, на которой произошло изменение, можно улучшить добавив дополнительную проверку соседей, на наличие у них других соседей с этим цветом. Но есть шанс попасть в бесконечный цикл. Можно избежать если вести учет этих объектов.

- можно было бы разделить HexGrid на подкклассы для расчётов поиска, но все функции относятся к grid'у, поэтому решил этого не делать

- в шаблоне было много старых ассетов, возможно какие-то из них я не успел вычистить

#### Уникальная фишка

Уникальной фишкой я решил добавить ещё один бустер - кисть с краской. Она красит верхний ряд соседей от точки в цвет выбранного гекса.

#### Использование AI

Использовал ChatGPT, для построения гексальной сетки, расположение и нахождение объектов на ней. Также для построения редактора в инспекторе левел-дизайна в конфигах уровней (дало возможность использовать Scene View для построения и предпросмотра уровней). 